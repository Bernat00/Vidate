@startuml
left to right direction
skinparam usecase {
  BorderColor Black
  BackgroundColor LightYellow
  ArrowColor Black
}
skinparam actor {
  BackgroundColor LightBlue
}
skinparam package {
  BackgroundColor WhiteSmoke
  BorderColor DarkGray
  FontStyle bold
}

/' Actors '/
actor "Visitor\n(Unregistered)" as Visitor
actor "Registered User" as User
actor "Moderator" as Moderator
actor "Email Service" as EmailService
actor "Location Service" as LocationService

/' Layer 1: Authentication & Account Management '/
package "Authentication & Account Management" {
  usecase "Register (email + password)" as UC_Register
  usecase "Confirm Email" as UC_ConfirmEmail
  usecase "Login (email + password)" as UC_Login
  usecase "Stay Logged In" as UC_StayLoggedIn
  usecase "Reset Password" as UC_ResetPassword
  usecase "Send Email" as UC_SendEmail

  UC_Register .> UC_ConfirmEmail : <<include>>
  UC_Register .> UC_SendEmail : <<include>>
  UC_ResetPassword .> UC_SendEmail : <<include>>
}

/' Layer 2: Profile Management '/
package "Profile Management" {
  usecase "Create / Edit Profile" as UC_EditProfile
  usecase "Upload Profile Photo" as UC_UploadPhoto
  usecase "Provide Required Info\n(name, DOB 18+, gender,\nseeking genders)" as UC_RequiredInfo
  usecase "Provide Optional Info\n(smoking, religion,\ninterests, etc.)" as UC_OptionalInfo
  usecase "Share Location\n(platform consent)" as UC_ShareLocation

  UC_EditProfile .> UC_UploadPhoto : <<include>>
  UC_EditProfile .> UC_RequiredInfo : <<include>>
  UC_EditProfile .> UC_OptionalInfo : <<include>>
}

/' Layer 3: Video Dating & Matchmaking '/
package "Video Dating & Matchmaking" {
  usecase "Enter Match Queue" as UC_EnterQueue
  usecase "Matchmaking\n(gender-based, MVP)" as UC_Matchmaking
  usecase "Wait for Partner" as UC_NoPartner
  usecase "Start Video Date\n(max 2 min)" as UC_StartVideo
  usecase "End Call Early\n(scroll to next)" as UC_EarlyEnd
  usecase "Decide: Like / Dislike" as UC_Decide
  usecase "View Basic Info During Call\n(name, age, distance)" as UC_ViewBasicDuringCall

  UC_EnterQueue .> UC_Matchmaking : <<include>>
  UC_Matchmaking .> UC_NoPartner : <<extend>>  : "no partner available"
  UC_Matchmaking .> UC_StartVideo : <<include>> : "when paired"
  UC_StartVideo .> UC_ViewBasicDuringCall : <<include>>
  UC_StartVideo .> UC_Decide : <<include>> : "at end"
  UC_StartVideo .> UC_EarlyEnd : <<extend>> : "user scrolls/ends early"
  UC_EarlyEnd .> UC_Decide : <<include>>
}

/' Layer 4: Matches & Communication '/
package "Matches & Communication" {
  usecase "Create Match\n(mutual likes)" as UC_CreateMatch
  usecase "View Detailed Profile Info" as UC_ViewDetailedAfterCall
  usecase "Chat with Match\n(text stored)" as UC_Chat
  usecase "Voice / Video Call\nwith Match" as UC_CallMatch

  UC_CreateMatch .> UC_ViewDetailedAfterCall : <<include>>
  UC_CreateMatch .> UC_Chat : <<include>>
  UC_CreateMatch .> UC_CallMatch : <<include>>

  UC_Decide .> UC_CreateMatch : <<extend>> : "if both liked"
}

/' Layer 5: Safety & Moderation '/
package "Safety & Moderation" {
  usecase "Report User\n(during chat/call)" as UC_Report
  usecase "Block User" as UC_Block
  usecase "Review Reports" as UC_ReviewReports
  usecase "Warn / Suspend / Ban User" as UC_ModerationActions

  UC_Report .> UC_ReviewReports : <<include>>
  UC_ReviewReports .> UC_ModerationActions : <<include>>
}

/' Actor connections to layers '/
Visitor --> UC_Register
Visitor --> UC_Login
Visitor --> UC_ResetPassword

User --> UC_Login
User --> UC_StayLoggedIn
User --> UC_ResetPassword
User --> UC_EditProfile
User --> UC_ShareLocation
User --> UC_EnterQueue
User --> UC_EarlyEnd
User --> UC_Decide
User --> UC_Chat
User --> UC_CallMatch
User --> UC_Report
User --> UC_Block

Moderator --> UC_ReviewReports
Moderator --> UC_ModerationActions

EmailService --> UC_SendEmail
LocationService --> UC_ShareLocation

/' Notes '/
note right of UC_RequiredInfo
  **Age Validation:**
  Only users 18+ can register

  **Gender Options:**
  Male, Female, Other (free text)

  **Seeking:**
  Multiple genders allowed
end note

note bottom of UC_StartVideo
  **Video Call Features:**
  - Vertical video stream
  - Maximum 2 minutes duration
  - Either party can end early
  - Both must decide after call ends
end note

note left of UC_ShareLocation
  **Location Privacy:**
  - Platform permission required
  - Distance displayed during video calls
  - Used in matching algorithm
end note

note bottom of UC_CreateMatch
  **Match Conditions:**
  Both users must like each other
  after the video date ends
end note

@enduml